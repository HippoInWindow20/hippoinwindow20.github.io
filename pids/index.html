<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>台北捷運多語 PIDS</title>
</head>

<body style="margin: 0;background: black;overflow-x: hidden;">
    <div id="main" style="width: 100vw;height: 56.25vw;background: black;box-sizing: content-box;padding: 5px;">
        <table style="width: 100%;height: 100%;background-color: black;">
            <tr style="width: 100%;height: 87%;border: 5px solid black;">
                <td style="width: 25%;height: 87%;padding: 0;">
                    <div style="width: 100%;height: 33.33%;box-sizing: border-box;">
                        <iframe id="train1"
                            src="waiting.html?colour=G&num=01&dest_zh=新店&dest_en=Xindian&dest_jp=新店&dest_kr=신뎬&is_final=1&min=15&sec=50"
                            style="width: 100%;height: 100%;border: none;border: 5px solid black;box-sizing: border-box;">

                        </iframe>
                    </div>
                    <div style="width: 100%;height: 33.33%;box-sizing: border-box;">
                        <iframe id="train2"
                            src="waiting.html?colour=G&num=08&dest_zh=台電大樓&dest_en=Taipower%20Building&dest_jp=台湾電力ビル&dest_kr=대만%20전력공사%20빌딩&is_final=0&min=10&sec=20"
                            style="width: 100%;height: 100%;border: 5px solid black;box-sizing: border-box;">

                        </iframe>
                    </div>
                    <div style="width:100%;height: 33.33%;background: black;box-sizing: border-box;">
                        <div id="news"
                            style="width: 100%;height: 100%;border: 5px solid black;box-sizing: border-box;background: url('ad/ad1.svg');background-size:cover;">
                        </div>
                    </div>
                </td>
                <td style="width: 75%;height: 85%;background:black;border: 5px solid black;border-left: 0;box-sizing: border-box;">
                    <iframe
                        style="width: 100%;height: 85%;border: none;box-sizing: border-box;background: url('ad/bg.jpg');background-size: cover;">

                    </iframe>
                    <iframe style="width: 100%;height: 15%;border: none;background: white;margin-top: -4px;">

                    </iframe>
                </td>
            </tr>
            <tr style="width: 100%;height: 13%;">
                <td style="width: 25%;height: 13%;">
                    <div
                        style="display: flex;justify-content: center;box-sizing: border-box;border-left: 5px solid black;border-right: 5px solid black;background:green;height: 100%;">
                        <span id="date"
                            style="font-family: 'Microsoft Jhenghei','微軟正黑體',sans-serif;font-size: 3.3cqw;font-weight: bold;color: white;margin: auto;">
                            10/11 11:41
                        </span>
                    </div>
                </td>
                <td style="width: 75%;height: 13%;background:black;">
                    <div class="marquee" style="width: 100%;height: 100%;overflow: hidden;display: flex;">
                        <marquee id="marquee"
                            style="width:0;min-width: 100%;color: white;font-family: 'Microsoft Jhenghei','微軟正黑體',sans-serif;font-size: 3.3cqw;margin-top: auto;margin-bottom: auto;white-space: nowrap;">
                            (CNA) Master hacker Shippo Hsu has been arrested for assaulting young children.
                        </marquee>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <script>
        var ad_cur = 1;
        var ads = [
            'ad1.svg',
            'ad2.svg',
            'ad3.svg',
            'ad4.svg'
        ]
        setInterval(
            function () {
                document.getElementById("news").style.background = 'url(ad/' + ads[ad_cur] + ')'
                document.getElementById("news").style.backgroundSize = 'cover'
                if (ad_cur == ads.length - 1) {
                    ad_cur = 0
                } else {
                    ad_cur++
                }
            }, 10000
        )

        function twoDigits(num) {
            if (num.length == 1) {
                return '0' + num
            } else {
                return num
            }
        }

        function setDate() {
            document.getElementById('date').innerHTML = twoDigits(new Date().getMonth().toString()) + '/' + twoDigits(new Date().getDate().toString()) + ' ' + twoDigits(new Date().getHours().toString()) + ":" + twoDigits(new Date().getMinutes().toString())
        }
        setDate()
        setInterval(setDate, 1000)

        //Counting
        var counter1 = (Math.floor(Math.random() * 144))*5
        var counter2 = counter1 + (Math.floor(Math.random() * 144))*5
        document.getElementById('train1').src = "waiting.html?colour=G&num=01&dest_zh=新店&dest_en=Xindian&dest_jp=新店&dest_kr=신뎬&is_final=1&time=" + counter1
        document.getElementById('train2').src = "waiting.html?colour=G&num=08&dest_zh=台電大樓&dest_en=Taipower%20Building&dest_jp=台湾電力ビル&dest_kr=대만%20전력공사%20빌딩&is_final=0&time=" + counter2
        setInterval(function () {
            counter1 -= 5
            counter2 -= 5
            var random1 = (Math.floor(Math.random() * 144))*5
            var random2 = (Math.floor(Math.random() * 144))*5
            if (counter1 <= -70){
                counter1 += random1
                document.getElementById('train1').contentWindow.minus(5-random1)
            }else{
                document.getElementById('train1').contentWindow.minus(5)
            }
            if (counter2 <= -70){
                counter2 += random2
                document.getElementById('train2').contentWindow.minus(5-random2)
            }else{
                document.getElementById('train2').contentWindow.minus(5)
            }
        }, 5000)

        setInterval(
            function (){
                var width = window.innerWidth
                var height = window.innerHeight
                if (width/height >= (16/9)){
                    document.getElementById("main").style.width = (1600/9) + "vh"
                    document.getElementById("main").style.height = "100vh" 
                }else{
                    document.getElementById("main").style.width = "100vw"
                    document.getElementById("main").style.height = "56.25vw" 
                }
            },5000
        )
    </script>
</body>

</html>