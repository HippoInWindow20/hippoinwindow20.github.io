var data = [
    [
        "",
        "https://drive.google.com/file/d/11qEClpHIMOLkv4XzRuGsXmxrk---cVhP/view?usp=sharing",
        "https://drive.google.com/file/d/1CVZK62UgsAdL83KcG6i3AkV6WnMRSk6-/view?usp=sharing",
        "https://drive.google.com/file/d/1KeVzgRKofIwniRaOQHwswG9KSmJrbECX/view?usp=sharing",
        "https://drive.google.com/file/d/1SpuuzSwkwaumb-dt_fZN5mVFcVYnwy4U/view?usp=sharing",
        "https://drive.google.com/file/d/15jSwz19EdvHBWDwzHKR3hpVe37OyuU18/view?usp=sharing",
        "https://drive.google.com/file/d/1JGpDnUYsxeQ-vrZ4IesqFcndqIlRlZAt/view?usp=sharing",
        "https://drive.google.com/file/d/1IRsGp9retAzmJ4Y0Chh7BapXvmoUnR6c/view?usp=sharing",
        "https://drive.google.com/file/d/1tt3cwiB_IlCQQe1OEirSvmg8-wNbKOG8/view?usp=sharing",
        "https://drive.google.com/file/d/1gpk2P6j8E8ZFu0liE0eHpI4PIOawp_3b/view?usp=sharing",
        "https://drive.google.com/file/d/1t3j4_MANKKcZtt9XPTJLqKNFGzhMCWec/view?usp=sharing",
        "https://drive.google.com/file/d/12DiNnFlygpvvv4NFBnVUGVdihINvV26L/view?usp=sharing",
        "https://drive.google.com/file/d/1zmj1S7ItLBVfHlSyUHp-D0HvLQaD9tuX/view?usp=sharing",
        "https://drive.google.com/file/d/1Xtnlm7ipU_gaHyeiejeg05dGbEa4sM7V/view?usp=sharing",
        "https://drive.google.com/file/d/1mJ6Whxhhq7vZdjQKQgXCy24CHt-rhRqT/view?usp=sharing",
        "https://drive.google.com/file/d/1mP4aArmM-oU0v1FRBC9fSRlPeT6h9Q3V/view?usp=sharing",
        "https://drive.google.com/file/d/12mN6MZocnBnkHPDbCpLE1vZzS0E3u7r1/view?usp=sharing",
        "https://drive.google.com/file/d/1sURGSit6-saEdwmOelKdArZdpxjSqSks/view?usp=sharing",
        "https://drive.google.com/file/d/1IBC40vhfwv3X3DyR-wAZvCpWUhz9sNTb/view?usp=sharing",
        "https://drive.google.com/file/d/11PfI0SB6sOFpm-gvCGLDdnI9KiFd6m7Y/view?usp=sharing",
        "https://drive.google.com/file/d/1XpVBW3M_lcbqGkcmkIrmHyxyyJZLhqXk/view?usp=sharing",
        "https://drive.google.com/file/d/1W42bQMqSeCKfEODSZbK-NAXEhfNZNiWy/view?usp=sharing",
        "https://drive.google.com/file/d/15H3UpYJIu9rUgpb-aCPqxIyOEaVlNBZx/view?usp=sharing",
        "https://drive.google.com/file/d/1_wb46uYyZUsWVLBxA7qXwUrvHhXlMYIw/view?usp=sharing",
        "https://drive.google.com/file/d/1pwdSkdtcIpa85H2Wa4WARySmTihQ1YUa/view?usp=sharing",
        "https://drive.google.com/file/d/1tzfH8IXFM004ku4PF1t1uyMIG-jigONL/view?usp=sharing",
        "https://drive.google.com/file/d/1zml8g_p3NrqmNv4qi0SbFMG81De6LTuJ/view?usp=sharing",
        "https://drive.google.com/file/d/1XxfdgCTdGHHRpun58CZFhN6j_wWFwYAd/view?usp=sharing",
        "https://drive.google.com/file/d/1SrvB0QqnthUAzmoV7hS4zQEpFG0-duYC/view?usp=sharing",
        "https://drive.google.com/file/d/1sU2tn4MG3FHy8oFNXuI7YEEPUnscb6Ah/view?usp=sharing",
        "https://drive.google.com/file/d/1xmOOSnkUzMVACPuSfHsDr8X16Bj41CDh/view?usp=sharing",
        "https://drive.google.com/file/d/1LsMyq-VnrYEltycN8fnQRVPL-0BcTPX_/view?usp=sharing",
        "https://drive.google.com/file/d/1PZHaiFYNyXFsrdEzHvf79EMz6BFr7qPs/view?usp=sharing",
        "https://drive.google.com/file/d/1K5rt_WWXQY0PSoJpB6btIDovwRl5v8Gu/view?usp=sharing",
        "https://drive.google.com/file/d/1bUe5fNidY8TnzTo29pWNtiwCWyM59W2c/view?usp=sharing",
        "https://drive.google.com/file/d/1nThZr5ey3CS7bdt7HFsKVpxqBbi3T17J/view?usp=sharing",
        "https://drive.google.com/file/d/1t6zA2azjlV87YDB0wLBuagqJa1ZUjinn/view?usp=sharing",
        "https://drive.google.com/file/d/1qD6Qcq86DplQAH-zyseGKEQFx3r6wTbs/view?usp=sharing",
        "https://drive.google.com/file/d/1aFETWpxq-Yk3NDqAjCpu7PboMwTUP-tr/view?usp=sharing",
        "https://drive.google.com/file/d/1fbAi6Hphtpdel5hz4xIVYbGyWIZ7-Q2X/view?usp=sharing",
        "https://drive.google.com/file/d/1SyTAbfb_pQiiXcbJtEg8JDF9qnwoVDE7/view?usp=sharing",
        "https://drive.google.com/file/d/1JFvowSujxJnS_AHcysadiP-hq4Gq_Vbh/view?usp=sharing",
        "https://drive.google.com/file/d/1Xoy-ycudsDoCgwd9luKuJqoqiExBMveN/view?usp=sharing",
        "https://drive.google.com/file/d/1Uo5aehF6NOFVV82RfJZU_Hvpz1TiNCiK/view?usp=sharing",
        "redirect.html?q=other0524",
        "https://drive.google.com/file/d/1GwoeTqB2OzG2QD2-gSi2WfqRxLDpzD6S/view?usp=sharing",
        "https://drive.google.com/file/d/1tsrBkrYU6z7FNloBcLeOQ41U_M_fSKKN/view?usp=sharing",
        "https://drive.google.com/file/d/1Ef1C5mx81HfI5hGJbwDxfoPCK1Vybuhp/view?usp=sharing",
        "https://drive.google.com/file/d/1wmndjc5tJk2603s8gpsdg3seKITQfEkm/view?usp=sharing",
        "https://drive.google.com/file/d/1aay_-p6sI5TUlBSlrE2Il49LrLz5JFDJ/view?usp=sharing",
        "https://drive.google.com/file/d/1MVmsutJdsHnaHKNelMvYst9Ujko7EY2u/view?usp=sharing",
        "redirect.html?q=eng0523",
        "https://drive.google.com/file/d/1Sbmg0E1_Dva8nu5nLa-GjGSttdpsJ_NP/view?usp=sharing",
        "https://drive.google.com/file/d/160KdebcjYZt78lfMjVRcjCdifEkG0H9r/view?usp=sharing",
        "https://drive.google.com/file/d/1OM1Uja7NzYiS4xy1CfMFv1wEGRMgHfe-/view?usp=sharing",
        "https://drive.google.com/file/d/1nnntd0CnRyTUppVqpI7n_VTj9CW1A1Ob/view?usp=sharing",
        "https://drive.google.com/file/d/15APHUh8s30uz5NnL4DNDQ3qVWZBVWURd/view?usp=sharing",
        "https://drive.google.com/file/d/1RFo2r__r85_eOWSI6-puST3sJovwQfLF/view?usp=sharing",
        "https://drive.google.com/file/d/1k7OtnuyOmprDfATX7kZYUmttfjzt8S1B/view?usp=sharing",
        "https://drive.google.com/file/d/1mPb57RKP10iguYZ4ZSbXAV_-RrFWuEuL/view?usp=sharing"
    ],

    [
        "2022-05-26 '數學' 以及 '資訊 Part 2' 的影片檔案因轉檔問題延遲上傳，請稍候",
        "2022-06-02 地理",
        "2022-06-02 資訊 Part 2",
        "2022-06-02 資訊 Part 1",
        "2022-06-02 公民",
        "2022-06-02 英文",
        "2022-06-02 數學",
        "2022-06-02 化學",
        "2022-06-02 地科",
        "2022-06-02 國文",
        "2022-06-01 物理",
        "2022-06-01 英文 Part 2",
        "2022-06-01 英文 Part 1",
        "2022-06-01 地科",
        "2022-06-01 國文",
        "2022-06-01 數學",
        "2022-05-31 英文",
        "2022-05-30 數學 Part 2",
        "2022-05-30 探究 (其他)",
        "2022-05-30 物理",
        "2022-05-30 地理",
        "2022-05-30 數學 Part 1",
        "2022-05-30 英文",
        "2022-05-30 國文",
        "2022-05-27 國文",
        "2022-05-27 物理",
        "2022-05-27 歷史",
        "2022-05-27 英文",
        "2022-05-27 數學",
        "2022-05-27 公民",
        "2022-05-26 地理",
        "2022-05-26 資訊 Part 1",
        "2022-05-26 公民",
        "2022-05-26 英文",
        "2022-05-26 化學",
        "2022-05-26 地科",
        "2022-05-26 國文",
        "2022-05-25 物理",
        "2022-05-25 英文 Part 2",
        "2022-05-25 英文 Part 1",
        "2022-05-25 地科",
        "2022-05-25 國文",
        "2022-05-25 數學",
        "2022-05-24 英文",
        "2022-05-24 輔導 (其他) [READ NOTES]",
        "2022-05-24 數學",
        "2022-05-24 化學",
        "2022-05-23 數學 Part 2",
        "2022-05-23 化學",
        "2022-05-23 地理",
        "2022-05-23 數學 Part 1",
        "2022-05-23 英文 [READ NOTES]",
        "2022-05-23 國文",
        "2022-04-25 數學 Part 2",
        "2022-04-25 探究 (化學) Part 2",
        "2022-04-25 探究 (化學) Part 1",
        "2022-04-25 地理",
        "2022-04-25 數學 Part 1",
        "2022-04-25 英文",
        "2022-04-25 國文"
    ],
    [
        "warning",
        "geo",
        "cs",
        "cs",
        "social",
        "eng",
        "math",
        "chemistry",
        "earth",
        "chi",
        "physics",
        "eng",
        "eng",
        "earth",
        "chi",
        "math",
        "eng",
        "math",
        "other",
        "physics",
        "geo",
        "math",
        "eng",
        "chi",
        "chi",
        "physics",
        "his",
        "eng",
        "math",
        "social",
        "geo",
        "cs",
        "social",
        "eng",
        "chemistry",
        "earth",
        "chi",
        "physics",
        "eng",
        "eng",
        "earth",
        "chi",
        "math",
        "eng",
        "other",
        "math",
        "chemistry",
        "math",
        "chemistry",
        "geo",
        "math",
        "eng",
        "chi",
        "math",
        "chemistry",
        "chemistry",
        "geo",
        "math",
        "eng",
        "chi"
    ]
];
if (document.cookie.includes("wrong")) {
    var cookieData = document.cookie.split(";");
    for (var x in cookieData) {
        if (cookieData[x].includes("wrong")) {
            var realnn = cookieData[x];
        }
    }
    var wrongPW = realnn.split("=")[1];
} else {
    var wrongPW = 0;
}

function popupPW() {
    if (document.cookie.split(";")[0].split("=")[0] == "pass" && document.cookie.split(";")[0].split("=")[1] == "true") {
        if (data[0].length == data[1].length && data[0].length == data[2].length) {
            loadData();
        } else {
            alert("Internal data mismatch, please try again later.\nPlease provide the following information to the developer:\n\ndata[0]: " + data[0].length + "\ndata[1]: " + data[1].length + "\n3. data[2]: " + data[2].length);
        }
    } else {
        var boxContent = "<div id='checkPWBox' class='PWdiv'><h1 style='font-size: 4.5vh'>請輸入密碼</h1><br><input type='password' id='pw' class='PWinput' /><br><h3 id='wrong' style='color: red;font-size: 4vh'></h3><br><br><button id='checkbtn' class='button' onclick='checkPW()'>確認</button></div>";
        document.body.innerHTML += boxContent;
        var input = document.getElementById("pw");
        if (wrongPW >= 5) {
            lockup();
        }
        // Execute a function when the user releases a key on the keyboard
        input.addEventListener("keyup", function(event) {
            // Number 13 is the "Enter" key on the keyboard
            if (event.keyCode === 13) {
                // Cancel the default action, if needed
                event.preventDefault();
                checkPW();
            }
        });
    }
}

function checkPW() {
    if (document.getElementById("pw").value.toLowerCase() == "yphs106") {
        document.getElementById("checkPWBox").style.display = "none";
        if (data[0].length == data[1].length && data[0].length == data[2].length) {
            loadData();
        } else {
            alert("Internal data mismatch, please try again later.\nPlease provide the following information to the developer:\n\ndata[0]: " + data[0].length + "\ndata[1]: " + data[1].length + "\n3. data[2]: " + data[2].length);
        }
        document.cookie = "pass=true;expires=Thu, 01 Jan 2066 00:00:00 UTC;;";
        document.cookie = "wrong=" + wrongPW + ";expires=Thu, 01 Jan 2066 00:00:00 UTC;;";
    } else {
        if (wrongPW <= 5) {
            wrongPW++;
            if (wrongPW < 5) {
                document.getElementById("wrong").innerHTML = "密碼錯誤" + wrongPW + "次";
                document.cookie = "pass=false;expires=Thu, 01 Jan 2066 00:00:00 UTC;;";
                document.cookie = "wrong=" + wrongPW + ";expires=Thu, 01 Jan 2066 00:00:00 UTC;;";
            } else {
                lockup();
            }
        }
    }
}

function lockup() {
    document.getElementById("wrong").innerHTML = "密碼錯誤" + wrongPW + "次，已鎖定";
    document.getElementById("checkbtn").disabled = true;
    document.getElementById("checkbtn").style.display = "none";
    document.getElementById("pw").disabled = true;
    document.cookie = "pass=false;expires=Thu, 01 Jan 2066 00:00:00 UTC;;";
    document.cookie = "wrong=" + wrongPW + ";expires=Thu, 01 Jan 2066 00:00:00 UTC;;";
}

function loadData() {
    var ArrayLength = data[0].length;
    document.getElementById("mainTable").innerHTML = null;
    for (i = 0; i < ArrayLength; i++) {
        if (data[2][i] !== "warning") {
            var tableNew = document.getElementById('mainTable');
            tableNew.innerHTML += "<td id='number" + i + "' class='defaultStyle'><img src='icons/" + data[2][i] + ".png' style='height: 2.8vh;vertical-align: middle;'><a class='link' title='" + data[1][i] + "' href='" + data[0][i] + "' target='_blank'>" + data[1][i] + "</a></td><br>";
        } else {
            var tableNew = document.getElementById('mainTable');
            tableNew.innerHTML += "<td id='number" + i + "' class='defaultStyle warning'><img src='icons/" + data[2][i] + ".png' style='height: 2.8vh;vertical-align: middle;'><a class='link' title='" + data[1][i] + "' >" + data[1][i] + "</a></td><br>";
        }
    }
}

function search() {
    var ArrayLength = data[0].length;
    var keyword = document.getElementById("keyword").value;
    if (keyword) {
        document.getElementById("mainTable").innerHTML = null;
        var cellNum = 0;
        for (i = 0; i < ArrayLength; i++) {
            var entry = data[1][i];
            var decision = entry.includes(keyword);
            if (decision == true) {
                if (data[2][i] !== "warning") {
                    var tableNew = document.getElementById('mainTable');
                    tableNew.innerHTML += "<td id='number" + i + "' class='defaultStyle'><img src='icons/" + data[2][i] + ".png' style='height: 2.8vh;vertical-align: middle;'><a class='link' title='" + data[1][i] + "' href='" + data[0][i] + "' target='_blank'>" + data[1][i] + "</a></td><br>";
                } else {
                    var tableNew = document.getElementById('mainTable');
                    tableNew.innerHTML += "<td id='number" + i + "' class='defaultStyle warning'><img src='icons/" + data[2][i] + ".png' style='height: 2.8vh;vertical-align: middle;'><a class='link' title='" + data[1][i] + "' >" + data[1][i] + "</a></td><br>";
                }
            }
        }
        if (document.getElementById("mainTable").innerHTML)
            var iii = 1; //Useless Action
        else {
            var tableNew = document.getElementById('mainTable');
            var row = tableNew.insertRow(0);
            var cell = row.insertCell(0);
            cell.id = "number";
            cell.className = "defaultStyle";
            document.getElementById("number").innerHTML = "未有符合關鍵字的項目。";
        }
    } else
        alert("請輸入關鍵字");
}

function searchsub() {
    var ArrayLength = data[0].length;
    var keyword = document.getElementById("subjectsearch").value;
    document.getElementById("mainTable").innerHTML = null;
    var cellNum = 0;
    for (i = 0; i < ArrayLength; i++) {
        var entry = data[1][i];
        var decision = entry.includes(keyword);
        if (decision == true) {
            if (data[2][i] !== "warning") {
                var tableNew = document.getElementById('mainTable');
                tableNew.innerHTML += "<td id='number" + i + "' class='defaultStyle'><img src='icons/" + data[2][i] + ".png' style='height: 2.8vh;vertical-align: middle;'><a class='link' title='" + data[1][i] + "' href='" + data[0][i] + "' target='_blank'>" + data[1][i] + "</a></td><br>";
            } else {
                var tableNew = document.getElementById('mainTable');
                tableNew.innerHTML += "<td id='number" + i + "' class='defaultStyle warning'><img src='icons/" + data[2][i] + ".png' style='height: 2.8vh;vertical-align: middle;'><a class='link' title='" + data[1][i] + "' >" + data[1][i] + "</a></td><br>";
            }
        }
    }
    if (document.getElementById("mainTable").innerHTML) {} else {
        var tableNew = document.getElementById('mainTable');
        var row = tableNew.insertRow(0);
        var cell = row.insertCell(0);
        cell.id = "number";
        cell.className = "defaultStyle";
        document.getElementById("number").innerHTML = "該科目沒有錄影檔。";
    }
}

function closeaction() {
    document.getElementById("closesearch").display = "none";
    document.getElementById("searchtools").display = "none";
    document.getElementById("showsearch").display = "block";
}

function showaction() {
    document.getElementById("closesearch").display = "block";
    document.getElementById("searchtools").display = "block";
    document.getElementById("showsearch").display = "none";
}

function logout() {
    document.cookie = "pass=false; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    document.cookie = "wrong=0; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    window.location.reload();
}